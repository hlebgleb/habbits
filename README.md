# Habbits

Personal habit & life tracking system.

Веб-приложение для трекинга привычек с интеграцией Notion Database.

## Структура проекта

- `index.html` - главная страница приложения
- `styles.css` - стили интерфейса
- `app.js` - основная логика приложения
- `notion-api.js` - утилиты для работы с Notion API
- `config.js` - конфигурация (токены и ID базы данных)
- `server.js` - прокси-сервер для обхода CORS (Node.js)
- `server.py` - прокси-сервер для обхода CORS (Python)
- `package.json` - зависимости проекта (Node.js)
- `requirements.txt` - зависимости проекта (Python)

## Настройка

### 1. Создание интеграции в Notion

1. Перейдите на https://www.notion.so/my-integrations
2. Нажмите "+ New integration"
3. Укажите название (например, "Habits Tracker")
4. Выберите рабочее пространство (workspace)
5. Скопируйте **Internal Integration Token** (токен начинается с `secret_`)

### 2. Создание базы данных в Notion

Создайте новую базу данных в Notion со следующими свойствами:

- **Habit** (Title) - название привычки
- **Date** (Date) - дата записи
- **Completed** (Checkbox) - выполнена ли привычка

**Важно:** Имена свойств должны точно совпадать (чувствительны к регистру)!

### 3. Подключение интеграции к базе данных

1. Откройте созданную базу данных в Notion
2. Нажмите на "..." (три точки) в правом верхнем углу
3. Выберите "Connections" → "Add connections"
4. Найдите вашу интеграцию и подключите её

### 4. Получение ID базы данных

1. Откройте базу данных в Notion
2. Скопируйте URL из адресной строки
3. ID базы данных - это часть URL между последним `/` и `?` (или до конца, если нет параметров)
   
   Пример URL: `https://www.notion.so/your-workspace/a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6?v=...`
   ID: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

### 5. Настройка конфигурации

Откройте файл `config.js` и заполните:

```javascript
const CONFIG = {
    NOTION_TOKEN: 'secret_ваш_токен_здесь',
    DATABASE_ID: 'ваш_id_базы_данных_здесь',
};
```

### 6. Установка зависимостей

⚠️ **ВАЖНО:** Из-за ограничений CORS Notion API, приложение должно работать через прокси-сервер.

Выберите один из вариантов:

#### Вариант A: Python (рекомендуется, если Node.js не установлен)

Убедитесь, что у вас установлен Python 3:

```bash
python3 --version
```

Установите зависимости:

```bash
pip3 install -r requirements.txt
```

Запустите сервер:

```bash
python3 server.py
```

#### Вариант B: Node.js

Убедитесь, что у вас установлен Node.js версии 18 или выше:

```bash
node --version
```

Установите зависимости:

```bash
npm install
```

Запустите сервер:

```bash
npm start
```

### 7. Открытие приложения

Сервер запустится на http://localhost:3000

Откройте http://localhost:3000 в браузере.

## Использование

1. Создайте записи о привычках в вашей Notion базе данных
2. Откройте приложение в браузере
3. Переключайте тумблеры для отметки выполнения привычек
4. Данные автоматически сохраняются в Notion

## Особенности

- Автоматическое отображение всех уникальных привычек из базы данных
- Отметка выполнения на текущую дату
- Современный и отзывчивый интерфейс
- Автоматическое определение эмодзи для привычек
- Прокси-сервер для обхода ограничений CORS Notion API

## Устранение проблем

### Ошибка CORS

Если вы видите ошибку CORS в консоли браузера, убедитесь, что:
1. Сервер запущен (`python3 server.py` или `npm start`)
2. Вы открываете приложение через http://localhost:3000 (не через file://)
3. Токен и ID базы данных правильно настроены в `config.js`

### Ошибка "Failed to fetch"

- Проверьте, что сервер запущен
- Убедитесь, что токен Notion правильный
- Проверьте, что интеграция подключена к базе данных в Notion

## Безопасность

⚠️ **ВАЖНО:** Файл `config.js` добавлен в `.gitignore` для безопасности. Никогда не коммитьте токены в публичный репозиторий!

Для продакшена рассмотрите использование переменных окружения или защищенного бекенда.
