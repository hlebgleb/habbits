<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä –ü—Ä–∏–≤—ã—á–µ–∫</title>
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ü—Ä–∏–≤—ã—á–∫–∏">
    <link rel="apple-touch-icon" href="/icons/icon.svg">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <p class="date" id="currentDate"></p>
        </header>

        <div class="habits-container" id="habitsContainer">
            <div class="loading" id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–≤—ã—á–µ–∫...</div>
        </div>

        <div class="error-message" id="errorMessage" style="display: none;"></div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="notificationSection" class="notification-section-container"></div>

    <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É -->
    <div class="container">
        <a href="/gleb/stat" class="stat-link">üìä –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –Ω–µ–¥–µ–ª—é</a>
    </div>

    <!-- Popup –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ -->
    <div id="successPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-icon">‚úÖ</div>
            <h2 class="popup-title">–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!</h2>
            <p class="popup-message" id="popupMessage"></p>
            <button class="popup-button" onclick="closeSuccessPopup()">–û–ö</button>
        </div>
    </div>

    <script src="/database-config.js"></script>
    <script src="/notion-api.js"></script>
    <script src="/push-notifications.js"></script>
    <script src="/app.js"></script>
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(reg => console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
                .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ SW:', err));
        }
    </script>
</body>
</html>
